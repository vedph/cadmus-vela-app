<form [formGroup]="form" (submit)="save()">
  <mat-card>
    <mat-card-header>
      <div mat-card-avatar>
        <mat-icon>picture_in_picture</mat-icon>
      </div>
      <mat-card-title i18n>Summary Part</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-tab-group>
        <!-- LOCATION -->
        <mat-tab i18n-label label="location">
          <!-- place -->
          <div>
            <cadmus-refs-proper-name
              [langEntries]="plngEntries"
              [typeEntries]="plptEntries"
              [name]="place.value"
              (nameChange)="onNameChange($event)"
            ></cadmus-refs-proper-name>
          </div>

          <!-- indoor -->
          <mat-checkbox i18n [formControl]="indoor">indoor</mat-checkbox>

          <div class="form-row">
            <!-- supportType (bound) -->
            <mat-form-field *ngIf="suptEntries?.length">
              <mat-label i18n>support type</mat-label>
              <mat-select [formControl]="supportType">
                <mat-option *ngFor="let e of suptEntries" [value]="e.id">{{
                  e.value
                }}</mat-option>
              </mat-select>
              <mat-error
                i18n
                *ngIf="
                  $any(supportType).errors?.required &&
                  (supportType.dirty || supportType.touched)
                "
                >support type required</mat-error
              >
            </mat-form-field>
            <!-- supportType (free) -->
            <mat-form-field *ngIf="!suptEntries?.length">
              <mat-label i18n>support type</mat-label>
              <input matInput [formControl]="supportType" />
              <mat-error
                i18n
                *ngIf="
                  $any(supportType).errors?.required &&
                  (supportType.dirty || supportType.touched)
                "
                >support type required</mat-error
              >
              <mat-error
                i18n
                *ngIf="
                  $any(supportType).errors?.maxLength &&
                  (supportType.dirty || supportType.touched)
                "
                >support type too long</mat-error
              >
            </mat-form-field>

            <!-- objectType -->
            <!-- objectType (bound) -->
            <mat-form-field *ngIf="supoEntries?.length">
              <mat-label i18n>objectType</mat-label>
              <mat-select [formControl]="objectType">
                <mat-option *ngFor="let e of supoEntries" [value]="e.id">{{
                  e.value
                }}</mat-option>
              </mat-select>
              <mat-error
                i18n
                *ngIf="
                  $any(objectType).errors?.required &&
                  (objectType.dirty || objectType.touched)
                "
                >object type required</mat-error
              >
            </mat-form-field>
            <!-- objectType (free) -->
            <mat-form-field *ngIf="!supoEntries?.length">
              <mat-label i18n>objectType</mat-label>
              <input matInput [formControl]="objectType" />
              <mat-error
                i18n
                *ngIf="
                  $any(objectType).errors?.required &&
                  (objectType.dirty || objectType.touched)
                "
                >object type required</mat-error
              >
              <mat-error
                i18n
                *ngIf="
                  $any(objectType).errors?.maxLength &&
                  (objectType.dirty || objectType.touched)
                "
                >object type too long</mat-error
              >
            </mat-form-field>
          </div>

          <div>
            <!-- currentFn (bound) -->
            <mat-form-field *ngIf="supfEntries?.length">
              <mat-label i18n>current function</mat-label>
              <mat-select [formControl]="currentFn">
                <mat-option *ngFor="let e of supfEntries" [value]="e.id">{{
                  e.value
                }}</mat-option>
              </mat-select>
              <mat-error
                i18n
                *ngIf="
                  $any(currentFn).errors?.required &&
                  (currentFn.dirty || currentFn.touched)
                "
                >current function required</mat-error
              >
            </mat-form-field>
            <!-- currentFn (free) -->
            <mat-form-field *ngIf="!supfEntries?.length">
              <mat-label i18n>current function</mat-label>
              <input matInput [formControl]="currentFn" />
              <mat-error
                i18n
                *ngIf="
                  $any(currentFn).errors?.required &&
                  (currentFn.dirty || currentFn.touched)
                "
                >current function required</mat-error
              >
              <mat-error
                i18n
                *ngIf="
                  $any(currentFn).errors?.maxLength &&
                  (currentFn.dirty || currentFn.touched)
                "
                >current function too long</mat-error
              >
            </mat-form-field>

            <!-- hasOriginalFn -->
            <mat-checkbox i18n [formControl]="hasOriginalFn"
              >original</mat-checkbox
            >

            <!-- originalFn (bound) -->
            <mat-form-field *ngIf="supfEntries?.length">
              <mat-label i18n>original function</mat-label>
              <mat-select [formControl]="originalFn">
                <mat-option *ngFor="let e of supfEntries" [value]="e.id">{{
                  e.value
                }}</mat-option>
              </mat-select>
            </mat-form-field>
            <!-- originalFn (free) -->
            <mat-form-field *ngIf="!supfEntries?.length">
              <mat-label i18n>original function</mat-label>
              <input matInput [formControl]="originalFn" />
              <mat-error i18n
                *ngIf="
                  $any(originalFn).errors?.maxLength &&
                  (originalFn.dirty || originalFn.touched)
                "
                >original function too long</mat-error
              >
            </mat-form-field>
          </div>
        </mat-tab>

        <!-- MATERIAL -->
        <mat-tab i18n-label label="material">

        </mat-tab>

        <!-- IDENTITY -->
        <mat-tab i18n-label label="identity"></mat-tab>

        <!-- STATES -->
        <mat-tab i18n-label label="states"></mat-tab>
      </mat-tab-group>
    </mat-card-content>
    <mat-card-actions>
      <cadmus-close-save-buttons
        [form]="form"
        [noSave]="userLevel < 2"
        (closeRequest)="close()"
      ></cadmus-close-save-buttons>
    </mat-card-actions>
  </mat-card>
</form>
